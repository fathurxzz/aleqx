@model List<EM2014.Helpers.MenuItem>
<div id="menu">
    <ul>
        @{
            int cnt = 0;
            foreach (var item in Model.OrderBy(m => m.SortOrder))
            {
                cnt++;
                string menuitemid = "menuitem" + cnt;
                string className = item.Current ? "current" : "";
                <li id="@menuitemid" class="menuitemclass">
                    <div class="current-bg-container">
                            <div class="current-bg @className"></div>
                    </div>
                    @Ajax.ActionLink(item.Title, "Index", "Home", new { category = item.ContentName }, new AjaxOptions {HttpMethod = "Get", UpdateTargetId = "productsContainer", OnBegin = "beginreq("+menuitemid+")", OnComplete = "endreq("+menuitemid+")"})
                </li>
            }
        }
        
    </ul>
</div>



