@using HavilaTravel.Models
@{
    if(ViewBag.MenuList!=null)
    {
        var menuItems = ((List<Menu>) ViewBag.MenuList).Where(m => m.MenuLevel == 2).Select(m => m).FirstOrDefault();

        if (menuItems != null && menuItems.Count > 0)
        {
            <div id="subMenu">
                <table>
                    <tr>
                        <td class="leftSide">
                        </td>
                        <td class="separator">
                        </td>

                        @foreach (var item in menuItems.OrderBy(m => m.SortOrder))
                        {
                            <td>
                    
                                @{
                                    if (item.Selected)
                                    {
                                        @item.Title
                                    }
                                    else
                                    {
                                        @Html.ActionLink(item.Title, "Index", "Home", new {id = item.Name}, null)
                                    }
                                }

                    
                    
                                @{
                                    if (Request.IsAuthenticated)
                                    {
                                        <br />
                                        @Html.ActionLink("Edit", "Edit", "Content", new {Area = "Admin", id = item.Id}, new {@class = "adminLink"})
                                    }
                                }
                            </td>
                        }
                        <td class="separator">
                        </td>
                        <td class="rightSide">
                        </td>
                    </tr>
                </table>
            </div>

        }
    }
}
