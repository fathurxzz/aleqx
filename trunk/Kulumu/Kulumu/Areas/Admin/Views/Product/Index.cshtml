@using Kulumu
@using SiteExtensions.Graphics
@model IEnumerable<Kulumu.Models.Product>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="adminContentContainer">
<h2>Ковры</h2>

<p>
    @Html.ActionLink("Добавить", "Create")
</p>
    <table class="adminEditContentTable">
        <tr>
            <th>
                Изображение
            </th>
            <th>
                Категория
            </th>
            <th>
                Заголовок
            </th>
            <th>
                Описание
            </th>
            
            <th>
                Скидка
            </th>
            <th>
                Скидка (текст)
            </th>
            <th>
                Цена
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model.OrderBy(c=>c.CategoryId)) {
            <tr>
                <td>
                    @Html.Raw(Html.CachedImage("~/Content/Images/", item.ImageSource, SiteSettings.GetThumbnail("preview"), ScaleMode.FixedWidth))
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Category.Title)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Title)
                </td>
                <td>
                    @Html.Raw(item.Description)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Discount)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DiscountText)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Price)
                </td>
                <td>
                    @Html.ActionLink("Редактировать", "Edit", new { id=item.Id }) |
                    @Html.ActionLink("Удалить", "Delete", new { id=item.Id })
                </td>
            </tr>
        }

    </table>

</div>