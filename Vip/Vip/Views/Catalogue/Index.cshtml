@using SiteExtensions.Graphics
@using Vip
@model Vip.Models.CatalogueViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="catalogue">
    @Html.Partial("_LayoutsFilter", Model.LayoutFilter)
    @if (Model.Categories != null)
    {
        <div class="mainTitle">
        </div>
        <div class="categoriesContainer">
            @foreach (var item in Model.Categories)
            {
                <div class="category">
                    <div class="img-container">
                        <div class="sign">
                            @item.Title
                        </div>
                        @Html.Raw(Html.ActionLink("[IMAGE]", "Index", "Catalogue", new { category = item.Name }, null).ToString().Replace("[IMAGE]", Html.CachedImage("~/Content/Images/", item.ImageSource, SiteSettings.GetThumbnail("catalogueThumbnail"), ScaleMode.Corp)))
                    </div>
                </div>
                
            }
            <div class="clear">
            </div>
        </div>
        
        
    }
    else
    {
        @Html.Partial("_AttributesFilter", Model.AttributesFilter)
       if (Request.IsAuthenticated)
       {
            <div>
                @Html.ActionLink("Добавить изображение", "Create", "Product", new { Area = "Admin", id = Model.Category.Id }, new { @class = "adminLink" })
            </div>
       }
        <div class="productsContainer">
            @foreach (var item in Model.Products)
            {
                <div class="product">
                    @if (Request.IsAuthenticated)
                    {
                        <div>
                            @Html.ActionLink("редактировать", "Edit", "Product", new { area = "Admin", id = item.Id }, new { @class = "adminLink" })
                        </div>
                    }
                    <div class="img-container">
                        <a rel="@Html.Raw("group1")" href="../../Content/Images/@item.ImageSource" class="fancyImage"  title="@Model.Title">
                            @Html.Raw(Html.CachedImage("~/Content/Images/", item.ImageSource, SiteSettings.GetThumbnail("catalogueThumbnail"), ScaleMode.Corp))
                        </a>
                    </div>
                    <div class="sign">
                        <span class="title">
                            @item.Title
                        </span>
                    </div>
                </div>
            }
            <div class="clear">
            </div>
        </div>
    }
</div>
